# ✏️ Создание репозитория рабочего проекта

{% hint style="warning" %}
_Репозиторием_ называют место, где хранится код проекта.

Вся текущая и будущая разработка будет производиться в одном репозитории [Github](https://github.com/) под названием **jpx** \(**J**ohn **P**antini E**x**tensions\).

**Github** нужен для удобного распространения исходного кода всего проекта между заинтересованными участниками. Внутри **Github** используется система контроля версий [**Git**](https://ru.wikipedia.org/wiki/Git) ****\(о ней речь пойдёт позднее\).
{% endhint %}

## Установка Git

Система контроля версий \(СКВ\) **Git** - это набор программ, которые позволят нам сохранять написанный код у себя локально и в том числе отправлять все правки на сервер **Github** в наш репозиторий \(создадим позднее\).

Несмотря на то, что в [главе ](getting-started.md#ustanovka-terminala-cmder)о подготовке рабочей среды мы установили терминал **Cmder** со встроенным **Git**, для более простого доступа к СКВ установим его глобально в **Program Files**. Для этого нужно зайти на сайт и скачать установочный дистрибутив:

{% embed url="https://git-scm.com/download/win" %}

Загрузка начнётся автоматически. Если нет, нажимаем **Click here to download manually**:

![&#x417;&#x430;&#x433;&#x440;&#x443;&#x437;&#x43A;&#x430; Git](../.gitbook/assets/image%20%2862%29.png)

Запускаем установщик, принимаем лицензионное соглашение, папку установки не меняем, флаги компонентов тоже можно не трогать.

На странице выбора редактора для Git можно ничего не менять \(вряд ли он будет использоваться\), а можно выбрать другой редактор, если таковой установлен в системе. Я выберу [Notepad++](https://notepad-plus-plus.org/downloads/):

![&#x41C;&#x43E;&#x436;&#x43D;&#x43E; &#x432;&#x44B;&#x431;&#x440;&#x430;&#x442;&#x44C; &#x43B;&#x44E;&#x431;&#x43E;&#x439; &#x434;&#x43E;&#x441;&#x442;&#x443;&#x43F;&#x43D;&#x44B;&#x439; &#x440;&#x435;&#x434;&#x430;&#x43A;&#x442;&#x43E;&#x440; &#x434;&#x43B;&#x44F; Git](../.gitbook/assets/image%20%2865%29.png)

На странице выбора имени ветви репозитория по умолчанию выбираем второй вариант:

 

![&#x412;&#x44B;&#x431;&#x438;&#x440;&#x430;&#x435;&#x43C; main](../.gitbook/assets/image%20%2871%29.png)

{% hint style="info" %}
**Ветвь** \("ветка"\) репозитория -  это механизм для параллельной разработки в рамках одного репозитория. Например, каждый разработчик может работать над одной определённой функцией в своей личной ветке.

В дальнейшем разработчики смогут скомбинировать изменения из разных ветвей в одну, которая, вероятно, пойдёт в production \(боевой режим\).

Раньше при создании репозитория автоматически создавалась ветвь по умолчанию под названием **master**. Но сейчас эта практика [изменилась](https://github.blog/changelog/2020-10-01-the-default-branch-for-newly-created-repositories-is-now-main/), теперь все репозитории Github начинают своё существование с ветки **main**.
{% endhint %}

Далее будет предложено выбрать, как модифицировать системные переменные окружения. Ничего не меняем, оставляем рекомендованный вариант:

![](../.gitbook/assets/image%20%2867%29.png)

Далее будет предложено выбрать клиент SSH. Оставляем по умолчанию.

![](../.gitbook/assets/image%20%2872%29.png)

Далее выбираем, какую библиотеку будет использовать Git для создания защищённых соединений. Оставляем по умолчанию.

![](../.gitbook/assets/image%20%2869%29.png)

Далее предстоит сделать выбор глобальной настройки, которой будет придерживаться Git при сохранении текстовых файлов, а именно [**окончаний строк**](https://ru.wikipedia.org/wiki/%D0%9F%D0%B5%D1%80%D0%B5%D0%B2%D0%BE%D0%B4_%D1%81%D1%82%D1%80%D0%BE%D0%BA%D0%B8).

{% hint style="info" %}
Окончание строки в текстовом файле обозначается специальным непечатным символом **`LF`** \(line feed\), или даже парой символов **`CRLF`**\(carriage return + line feed\) в зависимости от операционной системы.

 Unix, Linux и Mac OS X используют **`LF`**, а Windows **`CRLF`**
{% endhint %}

Мы будем вести разработку преимущественно в Linux-среде \(позднее\), в нашем случае остановимся на варианте, когда **Git** будет автоматически конвертировать CRLF в LF при сохранении изменений, а в обратном случае \(переключение между файлами и ветвями, когда файлы меняются на диске - **checkout**\) не будет делать ничего:

![](../.gitbook/assets/image%20%2863%29.png)

{% hint style="danger" %}
Эта настройка по работе с окончаниями строка называется **core.autocrlf**; на Windows при использовании установщика она сохраняется в не совсем корректное место. Позже мы установим эту настройку еще раз, но уже из терминала с командной строкой.
{% endhint %}

Далее нам предложат выбрать эмулятор терминала для Git Bash. Оставляем без изменений:

![](../.gitbook/assets/image%20%2870%29.png)

Далее нужно выбрать алгоритм применения изменений при использовании команды **git pull**, оставляем вариант по умолчанию:

![](../.gitbook/assets/image%20%2866%29.png)

Далее выбираем менеджер учётных данных для Git, оставляем по умолчанию:

![](../.gitbook/assets/image%20%2861%29.png)

На следующей странице выбираем флаги для дополнительных функций \(всё по умолчанию\):

![](../.gitbook/assets/image%20%2864%29.png)

![](../.gitbook/assets/image%20%2868%29.png)

Нажимаем **Install**, ждём завершения установки. Далее запускаем **Windows PowerShell**, и выполняем ряд команд \(после решётки **\#** идут комментарии, вводить их не нужно\):

```bash
$ git --version # Проверка версии git
```

Теперь настроим окончание строк по умолчанию, которое будет использовать Git при записи файлов в рабочую папку репозитория:

```bash
$ git config --global core.eol lf # Запись LF в настройку core.eol (end of line)
```

Чтобы проверить, что настройка записалась, вызовем команду:

```bash
$ git config --global core.eol # Проверка - должна вывести lf
```

Наконец, корректно зададим настройку **core.autocrlf**, о которой говорилось выше:

```bash
$ git config --global core.autocrlf input # Автоматически заменять CRLF на LF
$ git config --global core.autocrlf # Проверка - должна вывести input
```

{% hint style="info" %}
Все глобальные настройки **Git** можно переопределять, для этого в репозитории нужно создать файл`.gitattributes`, в котором задать необходимые [опции](https://git-scm.com/book/ru/v2/%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-Git-%D0%90%D1%82%D1%80%D0%B8%D0%B1%D1%83%D1%82%D1%8B-Git) на уровне проекта. Шаблоны для различных языков и платформ можно просмотреть [по ссылке](https://github.com/alexkaratarakis/gitattributes).
{% endhint %}

## Вариант 1. Самостоятельное ведение репозитория

В этом случае вы создадите свой личный репозиторий, в котором будете самостоятельно сохранять все изменения в коде. Т.е. фактически будете делать те же самые операции, что и я. При этом у вас будет возможность вносить собственные независимые правки по личным предпочтениям и нуждам, развивать проект на своё усмотрение.

{% hint style="info" %}
Это вариант, с которого стартую я. Репозиторий в дальнейшем для краткости буду называть **репо**.
{% endhint %}

После регистрации \(если нет аккаунта\) на сайте [github.com](https://github.com) переходим в профиль, выбираем вкладку **Repositories**, далее нажимаем **New**, либо сразу переходим по [ссылке ](https://github.com/new)создания нового репо:

![&#x421;&#x43E;&#x437;&#x434;&#x430;&#x43D;&#x438;&#x435; &#x43D;&#x43E;&#x432;&#x43E;&#x433;&#x43E; &#x440;&#x435;&#x43F;&#x43E; \(&#x43E;&#x431;&#x44F;&#x437;&#x430;&#x442;&#x435;&#x43B;&#x44C;&#x43D;&#x43E; &#x442;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x43D;&#x430;&#x437;&#x432;&#x430;&#x43D;&#x438;&#x435;\)](../.gitbook/assets/image%20%2848%29.png)

{% hint style="info" %}
Флажок **Add .gitignore** позволяет включить в проект специальный файл, в котором перечисляются файлы и директории, которые будут скрыты от системы контроля версий. Они не будут сохраняться на серверах **Github** в репо. Выбираем шаблон **Node**, т.к. большую часть времени будем разрабатывать на **JavaScript** через платформу **Node.js**
{% endhint %}

{% hint style="info" %}
Флажок лицензии позволяет установить таковую для проекта. Выбираем демократичную [MIT](https://ru.wikipedia.org/wiki/%D0%9B%D0%B8%D1%86%D0%B5%D0%BD%D0%B7%D0%B8%D1%8F_MIT).
{% endhint %}

Нажимаем **Create repository**. Теперь репозиторий готов к работе.

![&#x412;&#x438;&#x434; &#x440;&#x435;&#x43F;&#x43E; &#x441;&#x440;&#x430;&#x437;&#x443; &#x43F;&#x43E;&#x441;&#x43B;&#x435; &#x441;&#x43E;&#x437;&#x434;&#x430;&#x43D;&#x438;&#x44F;](../.gitbook/assets/image%20%2845%29.png)

## Вариант 2. Работа с копией моего репозитория \(fork\)

В таком случае вы получите копию моего оригинального репозитория в свой аккаунт Github, сможете делать свои собственные правки, а также получать все внесённые мною изменения, когда пожелаете. Изменения, сделанные в скопированном через fork репозитории, можно предлагать к слиянию с оригинальным репо через механизм, который называется **pull requests** \(запросы на принятие изменений\).

Далее можно работать аналогично первому варианту.

## Вариант 3. Работа с локальным клоном моего репозитория

В этом случае ваш аккаунт Github не претерпит никаких изменений, а копия репозитория будет храниться на вашем диске в режиме для чтения. В любой момент вы сможете синхронизировать мои правки, поддерживая исходный код в актуальном состоянии.



